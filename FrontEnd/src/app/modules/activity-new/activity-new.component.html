<aside class="fixed inset-y-0 left-0 w-72 bg-white text-gray-800 flex flex-col shadow">
  <div class="bg-yellow-400 text-black px-5 py-3 flex items-center gap-3">
    <img src="/logo2.png" alt="Logo" class="h-8 w-auto" />
    <div class="text-sm font-semibold tracking-wide">Registro UTA</div>
  </div>
  <nav class="p-4 pt-6 text-base space-y-3">
    <a routerLink="/perfil" class="block px-4 py-2.5 rounded-md border border-gray-300 font-semibold text-black hover:bg-gray-100">Inicio perfil</a>
    <a routerLink="/actividades/historial" class="block px-4 py-2.5 rounded-md border border-gray-300 font-semibold text-black hover:bg-gray-100">Historial</a>
    <a routerLink="/actividades/nueva" class="block px-4 py-2.5 rounded-md border border-gray-300 font-semibold text-black hover:bg-gray-100">Agregar registro</a>
    <a routerLink="/horario" class="block px-4 py-2.5 rounded-md border border-gray-300 font-semibold text-black hover:bg-gray-100">Horario</a>
  </nav>
</aside>

<main class="min-h-screen ml-72" style="background-color:#F4F8FF;">
  <header class="bg-[#0D1440] text-white">
    <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between">
      <h1 class="text-xl md:text-2xl font-bold tracking-wide">Académico</h1>
      <a routerLink="/login"
         class="inline-flex items-center gap-2 px-4 py-1.5 rounded-md bg-white text-gray-900 font-semibold shadow-sm hover:shadow hover:bg-gray-100 focus:outline-none focus:ring-2 ring-yellow-300 transition text-sm">
        Cerrar sesión
      </a>
    </div>
  </header>

  <section class="max-w-6xl mx-auto px-6 py-10">
    <div class="bg-white rounded-2xl border border-gray-200 shadow-sm">
      <div class="px-8 pt-8 text-center">
        <h2 class="text-3xl md:text-4xl font-extrabold text-[#0D1440] leading-tight">
          Registrar Actividad Curricular
        </h2>
      </div>

      <form class="px-8 py-8 space-y-7" [formGroup]="form" (ngSubmit)="submit()">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="md:col-span-1">
            <label for="fecha" class="block text-sm font-medium text-gray-700">Fecha (principal)</label>
            <input id="fecha" type="date" formControlName="fecha"
                   class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500" />
            <p *ngIf="f.fecha.touched && f.fecha.invalid" class="mt-1 text-sm text-red-600">La fecha es obligatoria.</p>
          </div>

          <div>
            <label for="tipo" class="block text-sm font-medium text-gray-700">Tipo de Actividad</label>
            <select id="tipo" formControlName="tipo_actividad"
                    class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500">
              <option *ngFor="let t of tiposActividad" [value]="t">{{ t }}</option>
            </select>
          </div>

          <div>
            <label for="estado" class="block text-sm font-medium text-gray-700">Estado</label>
            <select id="estado" formControlName="estado"
                    class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500">
              <option *ngFor="let e of estados" [value]="e">{{ e }}</option>
            </select>
          </div>
        </div>

        <div>
          <label for="desc" class="block text-sm font-medium text-gray-700">Descripción</label>
          <textarea id="desc" rows="6" formControlName="descripcionAct"
                    class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"
                    placeholder="Describe brevemente la actividad realizada..."></textarea>
          <p *ngIf="f.descripcionAct.touched && f.descripcionAct.invalid" class="mt-1 text-sm text-red-600">
            La descripción es obligatoria (máx. 500 caracteres).
          </p>
        </div>

        <div class="rounded-xl border border-gray-200 bg-gray-50 p-5" formGroupName="multi">
          <div class="flex items-center justify-between gap-4">
            <div class="text-sm font-semibold text-gray-800">Aplicar a múltiples días</div>
            <label class="inline-flex items-center gap-2 text-sm">
              <input type="checkbox" formControlName="enable"
                     class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
              Habilitar
            </label>
          </div>

          <div *ngIf="multi.get('enable')?.value" class="mt-4 space-y-5">
            <div class="flex flex-wrap items-center gap-3 text-sm">
              <span class="text-gray-700 font-medium">Modo:</span>
              <label class="inline-flex items-center gap-2">
                <input type="radio" value="specific" formControlName="mode"> Fechas específicas
              </label>
              <label class="inline-flex items-center gap-2">
                <input type="radio" value="weekly" formControlName="mode"> Repetir semanalmente
              </label>
            </div>

            <div *ngIf="multi.get('mode')?.value === 'specific'" class="space-y-3">
              <div class="flex flex-wrap items-center gap-3">
                <button type="button" (click)="addSpecificDate()"
                        class="inline-flex items-center px-3 py-1.5 rounded-md border border-blue-600 text-blue-600 font-medium hover:bg-blue-50">
                  + Agregar fecha
                </button>
                <span class="text-xs text-gray-600">Añade las fechas adicionales para la misma actividad.</span>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-3" formArrayName="specificDates">
                <div *ngFor="let _ of specificDates.controls; let i = index" class="flex items-center gap-2">
                  <input type="date" [formControlName]="i"
                         class="block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500">
                  <button type="button" (click)="removeSpecificDate(i)" aria-label="Eliminar fecha"
                          class="px-2 py-1 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100">✕</button>
                </div>
              </div>
            </div>

            <div *ngIf="multi.get('mode')?.value === 'weekly'" class="space-y-4" formGroupName="weekly">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700">Desde</label>
                  <input type="date" formControlName="start"
                         class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700">Hasta</label>
                  <input type="date" formControlName="end"
                         class="mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500">
                </div>
              </div>

              <div formGroupName="weekdays">
                <div class="text-sm font-medium text-gray-700 mb-2">Días de la semana</div>
                <div class="grid grid-cols-7 gap-2 text-sm">
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="mon"> Lun
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="tue"> Mar
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="wed"> Mié
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="thu"> Jue
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="fri"> Vie
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="sat"> Sáb
                  </label>
                  <label class="flex items-center justify-center gap-2 border rounded-md py-2 hover:bg-gray-50">
                    <input type="checkbox" formControlName="sun"> Dom
                  </label>
                </div>
                <p class="mt-2 text-xs text-gray-600">Se generarán fechas entre el rango “Desde/Hasta” que coincidan con los días marcados.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="pt-2 space-y-3">
          <button type="submit"
                  class="w-full inline-flex items-center justify-center px-4 py-3 rounded-md
                         border border-blue-600 text-blue-600 font-semibold
                         hover:bg-blue-50 focus:outline-none focus:ring-4 ring-blue-200 transition">
            Registrar
          </button>

          <a routerLink="/perfil"
             class="w-full inline-flex items-center justify-center px-4 py-3 rounded-md
                    bg-blue-600 text-white font-semibold hover:bg-blue-700
                    focus:outline-none focus:ring-4 ring-blue-200 transition">
            Cancelar
          </a>
        </div>
      </form>
    </div>
  </section>
</main>
