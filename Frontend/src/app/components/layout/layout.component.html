<aside
  class="fixed inset-y-0 left-0 z-30 flex flex-col border-r border-slate-200 bg-white/95 text-slate-900 shadow-2xl backdrop-blur-md transition-[width] duration-300 ease-in-out
         dark:border-slate-800 dark:bg-slate-950/95 dark:text-slate-100"
  (mouseenter)="onEnterSidebar()"
  (mouseleave)="onLeaveSidebar()"
  [ngClass]="isCollapsed ? 'w-20' : 'w-72'"
>
  <!-- SIDEBAR EXPANDIDA -->
  <ng-container *ngIf="!isCollapsed; else collapsedRail">
    <!-- Header -->
    <div
      class="flex items-center gap-3 px-4 py-4 border-b border-slate-200/80 transition-opacity duration-200
             dark:border-slate-800/70"
      [ngClass]="showMenu ? 'opacity-100' : 'opacity-0'"
    >
      <div
        class="h-12 w-12 rounded-2xl bg-indigo-500 flex items-center justify-center overflow-hidden shadow-md shadow-indigo-500/40"
      >
        <img
          src="/logouta.png"
          alt="SRADIM"
          class="h-16 w-16 object-contain"
        />
      </div>

      <div>
        <div class="text-2xl font-semibold tracking-tight">SRADIM</div>
        <p class="text-xl text-slate-500 dark:text-slate-400">
          Panel de Acceso
        </p>
      </div>
    </div>

    <!-- NAV ITEMS -->
    <nav
      class="flex-1 flex flex-col px-3 py-4 gap-1 text-m transition-opacity duration-200"
      [ngClass]="showMenu ? 'opacity-100' : 'opacity-0'"
    >
      <a
        *ngFor="let item of navItems"
        [routerLink]="item.link"
        routerLinkActive="bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-white"
        [routerLinkActiveOptions]="{ exact: true }"
        class="group flex items-center gap-3 px-3 py-2.5 rounded-xl
               text-slate-600 hover:bg-slate-100 hover:text-slate-900
               transition-colors duration-200
               dark:text-slate-300 dark:hover:bg-slate-800/80 dark:hover:text-white"
      >
        <!-- Icono -->
        <div
          class="flex h-16 w-16 items-center justify-center rounded-xl bg-slate-100
                 group-hover:bg-indigo-500/10
                 dark:bg-slate-900 dark:group-hover:bg-indigo-500/60
                 transition-colors duration-200"
        >
          <svg
            class="w-12 h-12"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.7"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <ng-container [ngSwitch]="item.icon">
              <!-- home -->
              <g *ngSwitchCase="'home'">
                <path d="M4 11L12 4l8 7" />
                <path d="M6 10.5V19a1 1 0 001 1h4v-5h4v5h3a1 1 0 001-1v-8" />
              </g>

              <!-- plus -->
              <g *ngSwitchCase="'plus'">
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
              </g>

              <!-- chart -->
              <g *ngSwitchCase="'chart'">
                <rect x="4" y="11" width="3" height="7" rx="1" />
                <rect x="10.5" y="8" width="3" height="10" rx="1" />
                <rect x="17" y="5" width="3" height="13" rx="1" />
              </g>

              <!-- calendar -->
              <g *ngSwitchCase="'calendar'">
                <rect x="4" y="6.5" width="16" height="13" rx="1.5" />
                <path d="M4 10h16" />
                <path d="M9 4v3" />
                <path d="M15 4v3" />
                <circle cx="9" cy="13.5" r="0.9" />
                <circle cx="12" cy="16" r="0.9" />
                <circle cx="15" cy="13.5" r="0.9" />
              </g>

              <!-- users -->
              <g *ngSwitchCase="'users'">
                <circle cx="9" cy="9.5" r="2.5" />
                <path d="M4.5 17.5C5.3 15.6 7 14.5 9 14.5s3.7 1.1 4.5 3" />
                <circle cx="16.5" cy="10.5" r="2.2" />
                <path d="M14.5 15c1.5.2 2.8 1.1 3.5 2.5" />
              </g>

              <!-- docs -->
              <g *ngSwitchCase="'docs'">
                <rect x="6" y="4" width="10" height="16" rx="1.5" />
                <path d="M9 8h5" />
                <path d="M9 11.5h5" />
                <path d="M9 15h3" />
              </g>

              <!-- clock (pendientes) -->
              <g *ngSwitchCase="'clock'">
                <circle cx="12" cy="12" r="7" />
                <path d="M12 8v4l2.5 2" />
              </g>
            </ng-container>
          </svg>
        </div>

        <!-- Texto -->
        <span class="font-medium truncate">
          {{ item.label }}
        </span>
      </a>

      <div
        class="mt-4 pt-3 border-t border-slate-200/80 text-xl text-slate-500
               dark:border-slate-800/70 dark:text-slate-400"
      >
        Navegaci贸n
      </div>
    </nav>

    <!-- TOGGLE TEMA + LOGOUT -->
    <div
      class="px-3 pb-4 pt-2 space-y-3 transition-opacity duration-200 border-t border-slate-200/80 dark:border-slate-800/70"
      [ngClass]="showMenu ? 'opacity-100' : 'opacity-0'"
    >
      <!-- Toggle tema -->
      <button
        type="button"
        (click)="toggleTheme()"
        class="w-full flex items-center justify-between px-3 py-2 rounded-xl
               border border-slate-200 bg-slate-50 text-xs text-slate-700
               hover:bg-slate-100
               dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800"
      >
        <div class="flex items-center gap-2">
          <span
            class="inline-flex h-6 w-6 items-center justify-center rounded-full
                   bg-yellow-300/90 text-yellow-900 text-sm
                   dark:bg-slate-700 dark:text-slate-100"
          >
            <ng-container *ngIf="currentTheme === 'light'; else moonIcon">
              
            </ng-container>
            <ng-template #moonIcon></ng-template>
          </span>
          <span class="font-semibold text-xl">Apariencia</span>
        </div>
        <span
          class="text-[11px] font-medium text-slate-500 dark:text-slate-400"
        >
          {{ currentTheme === 'light' ? 'Claro' : 'Oscuro' }}
        </span>
      </button>

      <!-- LOGOUT -->
      <button
        type="button"
        (click)="onLogout()"
        class="w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-red-500 text-white font-semibold hover:bg-red-600 transition-all shadow-md shadow-red-500/25"
      >
        <svg
          class="w-5 h-5"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.7"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M10 5H6.5A1.5 1.5 0 0 0 5 6.5v11A1.5 1.5 0 0 0 6.5 19H10"
          />
          <path d="M14 8l4 4-4 4" />
          <path d="M9.5 12H18" />
        </svg>
        Cerrar sesi贸n
      </button>
    </div>
  </ng-container>

  <!-- COLAPSADA -->
  <ng-template #collapsedRail>
    <div class="flex flex-col h-full items-center">
      <div class="mt-4 mb-6">
        <div
          class="h-10 w-10 rounded-2xl bg-indigo-500 flex items-center justify-center overflow-hidden shadow-md shadow-indigo-500/40"
        >
          <img
            src="/logouta.png"
            alt="SRADIM"
            class="h-8 w-8 object-contain"
          />
        </div>
      </div>

      <nav class="flex-1 flex flex-col items-center gap-4">
        <a
          *ngFor="let item of navItems"
          [routerLink]="item.link"
          routerLinkActive="bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-white"
          class="flex items-center justify-center h-10 w-10 rounded-2xl
                 hover:bg-slate-100 text-slate-600
                 dark:hover:bg-slate-800/80 dark:text-slate-300
                 transition-all"
          [attr.title]="item.label"
        >
          <svg
            class="w-16 h-16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.7"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <ng-container [ngSwitch]="item.icon">
              <g *ngSwitchCase="'home'">
                <path d="M4 11L12 4l8 7" />
                <path d="M6 10.5V19a1 1 0 001 1h4v-5h4v5h3a1 1 0 001-1v-8" />
              </g>

              <g *ngSwitchCase="'plus'">
                <line x1="12" y1="5" x2="12" y2="19" />
                <line x1="5" y1="12" x2="19" y2="12" />
              </g>

              <g *ngSwitchCase="'chart'">
                <rect x="4" y="11" width="3" height="7" rx="1" />
                <rect x="10.5" y="8" width="3" height="10" rx="1" />
                <rect x="17" y="5" width="3" height="13" rx="1" />
              </g>

              <g *ngSwitchCase="'calendar'">
                <rect x="4" y="6.5" width="16" height="13" rx="1.5" />
                <path d="M4 10h16" />
                <path d="M9 4v3" />
                <path d="M15 4v3" />
              </g>

              <g *ngSwitchCase="'users'">
                <circle cx="9" cy="9.5" r="2.5" />
                <path d="M4.5 17.5C5.3 15.6 7 14.5 9 14.5s3.7 1.1 4.5 3" />
                <circle cx="16.5" cy="10.5" r="2.2" />
              </g>

              <g *ngSwitchCase="'docs'">
                <rect x="6" y="4" width="10" height="16" rx="1.5" />
                <path d="M9 8h5" />
                <path d="M9 11.5h5" />
                <path d="M9 15h3" />
              </g>

              <g *ngSwitchCase="'clock'">
                <circle cx="12" cy="12" r="7" />
                <path d="M12 8v4l2.5 2" />
              </g>
            </ng-container>
          </svg>
        </a>
      </nav>

      <!-- Toggle tema versi贸n compacta -->
      <button
        type="button"
        (click)="toggleTheme()"
        class="mb-3 flex items-center justify-center h-10 w-10 rounded-2xl
               border border-slate-200 bg-slate-50 text-2xl
               hover:bg-slate-100
               dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:hover:bg-slate-800"
        [attr.title]="
          currentTheme === 'light' ? 'Cambiar a modo oscuro' : 'Cambiar a modo claro'
        "
      >
        <ng-container *ngIf="currentTheme === 'light'; else moonSmall">
          
        </ng-container>
        <ng-template #moonSmall></ng-template>
      </button>

      <div class="mb-4">
        <button
          type="button"
          (click)="onLogout()"
          class="flex items-center justify-center h-10 w-10 rounded-2xl bg-red-500 hover:bg-red-600 text-white transition-all shadow-md shadow-red-500/25"
          title="Cerrar sesi贸n"
        >
          <svg
            class="w-16 h-16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.7"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M10 5H6.5A1.5 1.5 0 0 0 5 6.5v11A1.5 1.5 0 0 0 6.5 19H10"
            />
            <path d="M14 8l4 4-4 4" />
            <path d="M9.5 12H18" />
          </svg>
        </button>
      </div>
    </div>
  </ng-template>
</aside>

<main
  class="min-h-screen bg-slate-50 text-slate-900 transition-[margin,background-color,color] duration-300 ease-in-out
         dark:bg-gradient-to-b dark:from-slate-950 dark:via-slate-950 dark:to-slate-900 dark:text-slate-100"
  [ngClass]="isCollapsed ? 'ml-20' : 'ml-72'"
>
  <section class="w-full h-full">
    <ng-content></ng-content>
  </section>
</main>
