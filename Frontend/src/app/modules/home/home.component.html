<!-- ALERTA GLOBAL -->
<div
  *ngIf="alertMessage"
  class="fixed top-10 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-lg shadow-lg text-white bg-black/80 backdrop-blur-sm animate-fadeIn"
>
  {{ alertMessage }}
</div>

<!-- HERO PRINCIPAL -->
<section
  class="relative text-white overflow-hidden transition-all duration-700"
  [ngStyle]="{
    'min-height': '100vh',
    'background-image': 'url(' + currentBg + ')',
    'background-size': 'cover',
    'background-position': 'center center',
    'background-repeat': 'no-repeat'
  }"
>
  <!-- overlay -->
  <div
    class="absolute inset-0 bg-gradient-to-tr from-[#0D1440]/85 via-[#0D1440]/70 to-[#0D1440]/30"
  ></div>

  <div
    class="relative z-10 max-w-6xl mx-auto px-8 md:px-10 py-16 md:py-24 flex flex-col gap-10"
  >
    <div class="max-w-3xl space-y-4">
      <p class="text-xs uppercase tracking-[0.2em] text-yellow-300/80">
        Universidad de Tarapacá · Módulo académico
      </p>
      <h2
        class="text-4xl md:text-5xl font-bold leading-tight tracking-tight drop-shadow-xl"
      >
        Registra, monitorea y organiza las actividades académicas en un solo
        lugar.
      </h2>
      <p class="text-sm md:text-base text-slate-100/90 max-w-xl">
        Accede con tu cuenta institucional para registrar clases, reuniones,
        actividades de investigación y mantener tu historial académico siempre
        actualizado.
      </p>
    </div>

    <div class="flex flex-wrap gap-3">
      <button
        type="button"
        (click)="toggleLogin()"
        class="inline-flex items-center justify-center px-6 py-3 rounded-xl bg-yellow-400 text-[#0D1440] text-sm font-semibold shadow-lg shadow-yellow-400/40 hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-yellow-300"
      >
        Iniciar sesión
      </button>

      <span
        class="text-xs md:text-sm text-slate-100/80 self-center mt-2 md:mt-0"
      >
        Acceso exclusivo para funcionarios y personal autorizado.
      </span>
    </div>
  </div>
</section>

<!-- FOOTER -->
<app-footer></app-footer>

<!-- OVERLAY LOGIN SPLIT SCREEN -->
<div
  class="fixed inset-0 z-40 flex items-center justify-center px-4 md:px-6"
  [class.pointer-events-none]="!loginOpen"
>
  <!-- fondo oscuro -->
  <div
    class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300"
    [ngClass]="loginOpen ? 'opacity-100' : 'opacity-0'"
    (click)="closeLogin()"
  ></div>

  <!-- CONTENEDOR SPLIT -->
  <div
    class="relative w-full max-w-5xl rounded-3xl overflow-hidden shadow-2xl transform transition-all duration-500
           bg-slate-950/95 border border-slate-800 text-slate-100
           grid md:grid-cols-2 min-h-[520px]"
    [ngClass]="loginOpen ? 'opacity-100 translate-y-0 scale-100' : 'opacity-0 translate-y-6 scale-95 pointer-events-none'"
    (click)="$event.stopPropagation()"
    role="dialog"
    aria-modal="true"
  >
    <!-- PANEL IZQUIERDO: LOGIN -->
    <div class="flex flex-col px-8 py-8 md:px-10 md:py-10 gap-6">
      <!-- logo / título -->
      <div class="space-y-1">
        <div
          class="h-10 w-10 rounded-xl bg-indigo-500/20 border border-indigo-400/40 flex items-center justify-center mb-2"
        >
          <span class="text-xl font-semibold text-indigo-300">U</span>
        </div>
        <h3 class="text-xl md:text-2xl font-semibold">
          Inicia sesión en tu cuenta
        </h3>
        <p class="text-xs md:text-sm text-slate-400">
          Usa tu correo institucional para acceder al registro de actividades.
        </p>
      </div>

      <!-- FORMULARIO -->
      <form [formGroup]="form" class="space-y-5 w-full">
        <!-- EMAIL -->
        <div>
          <label for="email" class="text-xs font-medium text-slate-200 mb-1">
            Correo electrónico
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            placeholder="tu@correo.com"
            class="mt-1 w-full rounded-lg border border-slate-700 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            autocomplete="username"
          />
        </div>

        <!-- PASSWORD -->
        <div>
          <label
            for="password"
            class="text-xs font-medium text-slate-200 mb-1"
          >
            Contraseña
          </label>
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="••••••••"
            class="mt-1 w-full rounded-lg border border-slate-700 bg-slate-900/60 px-3 py-2.5 text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            autocomplete="current-password"
          />
        </div>
      </form>

      <!-- BOTÓN ACCEDER -->
      <div class="pt-2">
        <button
          type="button"
          (click)="submit()"
          [disabled]="form.invalid"
          class="w-full inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-semibold
                 bg-indigo-500 hover:bg-indigo-400 text-white shadow-lg shadow-indigo-500/40
                 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-950
                 disabled:opacity-60 disabled:cursor-not-allowed"
        >
          Acceder
        </button>
      </div>

      <p class="mt-2 text-[11px] text-slate-500">
        Si tienes problemas para acceder, contacta al administrador del sistema.
      </p>
    </div>

    <!-- PANEL DERECHO: IMAGEN -->
    <div class="hidden md:block relative">
      <img
        [src]="currentBg"
        alt="Escritorio de trabajo académico"
        class="h-full w-full object-cover"
      />
      <div
        class="absolute inset-0 bg-gradient-to-t from-slate-950/80 via-slate-950/40 to-transparent"
      ></div>
    </div>
  </div>
</div>
